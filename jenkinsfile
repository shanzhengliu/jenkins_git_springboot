pipeline {
    agent any
    stages {
        stage('VAR SETTING') {
            steps {
               echo "VAR SETTING"
               sh 'export BUILD_ID=dontKillMe'
               sh 'export MAVEN_HOME=/www/maven-3.3'
               sh 'export PATH=$MAVEN_HOME/bin:$PATH'
            }
        }
        stage('KILL PROCESS') {
            steps {
               echo "KILL PROCESS"
               sh 'cd /www/wwwroot/src'
               sh './app.sh stop'
            }
        }
         stage('BUILD PROJECT') {
            steps {
              sh 'cd /www/wwwroot/src/spring_pineline'
              sh 'mvn install'
            }
         }
         stage('RUN PROJECT') {
             steps {
               sh 'cd /www/wwwroot/src'
               sh './app.sh start'
               sh './app.sh status'
             }
         }
    }
}
