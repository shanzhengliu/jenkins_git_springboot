pipeline {
    agent any
    tools {
        new-maven 'apache-maven-3.6.0'
        jdk 'java-1.8-openjdk'
    }
    stages {
        stage('KILL PROCESS') {
            steps {
               echo "KILL PROCESS"
               sh '/www/wwwroot/src/app.sh stop'
            }
        }
         stage('BUILD PROJECT') {
            steps {
              echo "BUILD PROJECT"
              sh "cd /www/wwwroot/src/spring_pineline;mvn install"
            }
         }
        stage('PACKAGE PROJECT') {
                 steps {
                   echo "PACKAGE PROJECT"
                   sh 'cd /www/wwwroot/src/spring_pineline;mvn package'
                 }
              }
         stage('RUN PROJECT') {
             steps {
               withEnv(['JENKINS_NODE_COOKIE=dontkillme']) {
               sh '/www/wwwroot/src/app.sh start'
               }
             }
         }
    }
}
